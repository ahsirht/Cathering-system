import{c as cr}from"./classnames-BK5ccKcQ.js";import{r as u}from"./react-CXTTs95W.js";import{c as Zr,u as O,d as on,a as sn,r as At,s as Gr,e as Kt,f as un,h as fn,i as Ve,j as St,k as cn,g as Mt,l as ln,m as vn,n as dn}from"./rc-util-B4_nxVmj.js";import{h as Ot,i as Yt,a as Et,_ as Dt,k as Rt,e as R,d as qe,c as $,f as Te,b as We,j as Tt,l as hn,g as Mr}from"./@babel-nFbzLRrx.js";import{F as Xt}from"./@ant-design-Cu48EoO5.js";import{r as pt}from"./react-dom-yuB3ijGn.js";import{R as en}from"./rc-resize-observer-SNp0dgvm.js";import{C as rn}from"./rc-motion-D0wS6mJl.js";var mn=["b"],gn=["v"],wt=function(e){return Math.round(Number(e||0))},yn=function(e){if(e instanceof Xt)return e;if(e&&qe(e)==="object"&&"h"in e&&"b"in e){var r=e,n=r.b,a=Rt(r,mn);return R(R({},a),{},{v:n})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},$t=function(t){Ot(r,t);var e=Yt(r);function r(n){return Et(this,r),e.call(this,yn(n))}return Dt(r,[{key:"toHsbString",value:function(){var a=this.toHsb(),i=wt(a.s*100),o=wt(a.b*100),s=wt(a.h),v=a.a,h="hsb(".concat(s,", ").concat(i,"%, ").concat(o,"%)"),m="hsba(".concat(s,", ").concat(i,"%, ").concat(o,"%, ").concat(v.toFixed(v===0?0:2),")");return v===1?h:m}},{key:"toHsb",value:function(){var a=this.toHsv(),i=a.v,o=Rt(a,gn);return R(R({},o),{},{b:i,a:this.a})}}]),r}(Xt),bn=function(e){return e instanceof $t?e:new $t(e)};bn("#1677ff");var tn=u.createContext(null),Lt=[];function wn(t,e){var r=u.useState(function(){if(!Zr())return null;var f=document.createElement("div");return f}),n=$(r,1),a=n[0],i=u.useRef(!1),o=u.useContext(tn),s=u.useState(Lt),v=$(s,2),h=v[0],m=v[1],l=o||(i.current?void 0:function(f){m(function(S){var c=[f].concat(Te(S));return c})});function C(){a.parentElement||document.body.appendChild(a),i.current=!0}function g(){var f;(f=a.parentElement)===null||f===void 0||f.removeChild(a),i.current=!1}return O(function(){return t?o?o(C):C():g(),g},[t]),O(function(){h.length&&(h.forEach(function(f){return f()}),m(Lt))},[h]),[a,l]}function Cn(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Sn="rc-util-locker-".concat(Date.now()),kt=0;function Mn(t){var e=!!t,r=u.useState(function(){return kt+=1,"".concat(Sn,"_").concat(kt)}),n=$(r,1),a=n[0];O(function(){if(e){var i=on(document.body).width,o=Cn();sn(`
html body {
  overflow-y: hidden;
  `.concat(o?"width: calc(100% - ".concat(i,"px);"):"",`
}`),a)}else At(a);return function(){At(a)}},[e,a])}var Pn=!1;function xn(t){return Pn}var Ht=function(e){return e===!1?!1:!Zr()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},nn=u.forwardRef(function(t,e){var r=t.open,n=t.autoLock,a=t.getContainer;t.debug;var i=t.autoDestroy,o=i===void 0?!0:i,s=t.children,v=u.useState(r),h=$(v,2),m=h[0],l=h[1],C=m||r;u.useEffect(function(){(o||r)&&l(r)},[r,o]);var g=u.useState(function(){return Ht(a)}),f=$(g,2),S=f[0],c=f[1];u.useEffect(function(){var Y=Ht(a);c(Y??null)});var q=wn(C&&!S),w=$(q,2),M=w[0],F=w[1],x=S??M;Mn(n&&r&&Zr()&&(x===M||x===document.body));var y=null;if(s&&Gr(s)&&e){var L=s;y=L.ref}var B=Kt(y,e);if(!C||!Zr()||S===void 0)return null;var j=x===!1||xn(),I=s;return e&&(I=u.cloneElement(s,{ref:B})),u.createElement(tn.Provider,{value:F},j?I:pt.createPortal(I,x))});function Pt(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var xt=Pt();var qn=/%[sdj%]/g,Fn=function(){};function qt(t){if(!t||!t.length)return null;var e={};return t.forEach(function(r){var n=r.field;e[n]=e[n]||[],e[n].push(r)}),e}function oe(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var a=0,i=r.length;if(typeof t=="function")return t.apply(null,r);if(typeof t=="string"){var o=t.replace(qn,function(s){if(s==="%%")return"%";if(a>=i)return s;switch(s){case"%s":return String(r[a++]);case"%d":return Number(r[a++]);case"%j":try{return JSON.stringify(r[a++])}catch{return"[Circular]"}break;default:return s}});return o}return t}function En(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function z(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||En(e)&&typeof t=="string"&&!t)}function Dn(t,e,r){var n=[],a=0,i=t.length;function o(s){n.push.apply(n,Te(s||[])),a++,a===i&&r(n)}t.forEach(function(s){e(s,o)})}function jt(t,e,r){var n=0,a=t.length;function i(o){if(o&&o.length){r(o);return}var s=n;n=n+1,s<a?e(t[s],i):r([])}i([])}function Rn(t){var e=[];return Object.keys(t).forEach(function(r){e.push.apply(e,Te(t[r]||[]))}),e}var Vt=function(t){Ot(r,t);var e=Yt(r);function r(n,a){var i;return Et(this,r),i=e.call(this,"Async Validation Error"),We(Tt(i),"errors",void 0),We(Tt(i),"fields",void 0),i.errors=n,i.fields=a,i}return Dt(r)}(hn(Error));function Nn(t,e,r,n,a){if(e.first){var i=new Promise(function(C,g){var f=function(q){return n(q),q.length?g(new Vt(q,qt(q))):C(a)},S=Rn(t);jt(S,r,f)});return i.catch(function(C){return C}),i}var o=e.firstFields===!0?Object.keys(t):e.firstFields||[],s=Object.keys(t),v=s.length,h=0,m=[],l=new Promise(function(C,g){var f=function(c){if(m.push.apply(m,c),h++,h===v)return n(m),m.length?g(new Vt(m,qt(m))):C(a)};s.length||(n(m),C(a)),s.forEach(function(S){var c=t[S];o.indexOf(S)!==-1?jt(c,r,f):Dn(c,r,f)})});return l.catch(function(C){return C}),l}function An(t){return!!(t&&t.message!==void 0)}function Tn(t,e){for(var r=t,n=0;n<e.length;n++){if(r==null)return r;r=r[e[n]]}return r}function Wt(t,e){return function(r){var n;return t.fullFields?n=Tn(e,t.fullFields):n=e[r.field||t.fullField],An(r)?(r.field=r.field||t.fullField,r.fieldValue=n,r):{message:typeof r=="function"?r():r,fieldValue:n,field:r.field||t.fullField}}}function _t(t,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];qe(n)==="object"&&qe(t[r])==="object"?t[r]=R(R({},t[r]),n):t[r]=n}}return t}var ur="enum",$n=function(e,r,n,a,i){e[ur]=Array.isArray(e[ur])?e[ur]:[],e[ur].indexOf(r)===-1&&a.push(oe(i.messages[ur],e.fullField,e[ur].join(", ")))},Ln=function(e,r,n,a,i){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||a.push(oe(i.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(r)||a.push(oe(i.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},kn=function(e,r,n,a,i){var o=typeof e.len=="number",s=typeof e.min=="number",v=typeof e.max=="number",h=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m=r,l=null,C=typeof r=="number",g=typeof r=="string",f=Array.isArray(r);if(C?l="number":g?l="string":f&&(l="array"),!l)return!1;f&&(m=r.length),g&&(m=r.replace(h,"_").length),o?m!==e.len&&a.push(oe(i.messages[l].len,e.fullField,e.len)):s&&!v&&m<e.min?a.push(oe(i.messages[l].min,e.fullField,e.min)):v&&!s&&m>e.max?a.push(oe(i.messages[l].max,e.fullField,e.max)):s&&v&&(m<e.min||m>e.max)&&a.push(oe(i.messages[l].range,e.fullField,e.min,e.max))},an=function(e,r,n,a,i,o){e.required&&(!n.hasOwnProperty(e.field)||z(r,o||e.type))&&a.push(oe(i.messages.required,e.fullField))},Qr;const Hn=function(){if(Qr)return Qr;var t="[a-fA-F\\d:]",e=function(y){return y&&y.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",a=["(?:".concat(n,":){7}(?:").concat(n,"|:)"),"(?:".concat(n,":){6}(?:").concat(r,"|:").concat(n,"|:)"),"(?:".concat(n,":){5}(?::").concat(r,"|(?::").concat(n,"){1,2}|:)"),"(?:".concat(n,":){4}(?:(?::").concat(n,"){0,1}:").concat(r,"|(?::").concat(n,"){1,3}|:)"),"(?:".concat(n,":){3}(?:(?::").concat(n,"){0,2}:").concat(r,"|(?::").concat(n,"){1,4}|:)"),"(?:".concat(n,":){2}(?:(?::").concat(n,"){0,3}:").concat(r,"|(?::").concat(n,"){1,5}|:)"),"(?:".concat(n,":){1}(?:(?::").concat(n,"){0,4}:").concat(r,"|(?::").concat(n,"){1,6}|:)"),"(?::(?:(?::".concat(n,"){0,5}:").concat(r,"|(?::").concat(n,"){1,7}|:))")],i="(?:%[0-9a-zA-Z]{1,})?",o="(?:".concat(a.join("|"),")").concat(i),s=new RegExp("(?:^".concat(r,"$)|(?:^").concat(o,"$)")),v=new RegExp("^".concat(r,"$")),h=new RegExp("^".concat(o,"$")),m=function(y){return y&&y.exact?s:new RegExp("(?:".concat(e(y)).concat(r).concat(e(y),")|(?:").concat(e(y)).concat(o).concat(e(y),")"),"g")};m.v4=function(x){return x&&x.exact?v:new RegExp("".concat(e(x)).concat(r).concat(e(x)),"g")},m.v6=function(x){return x&&x.exact?h:new RegExp("".concat(e(x)).concat(o).concat(e(x)),"g")};var l="(?:(?:[a-z]+:)?//)",C="(?:\\S+(?::\\S*)?@)?",g=m.v4().source,f=m.v6().source,S="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",c="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",q="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",w="(?::\\d{2,5})?",M='(?:[/?#][^\\s"]*)?',F="(?:".concat(l,"|www\\.)").concat(C,"(?:localhost|").concat(g,"|").concat(f,"|").concat(S).concat(c).concat(q,")").concat(w).concat(M);return Qr=new RegExp("(?:^".concat(F,"$)"),"i"),Qr};var zt={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Sr={integer:function(e){return Sr.number(e)&&parseInt(e,10)===e},float:function(e){return Sr.number(e)&&!Sr.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return qe(e)==="object"&&!Sr.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(zt.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Hn())},hex:function(e){return typeof e=="string"&&!!e.match(zt.hex)}},jn=function(e,r,n,a,i){if(e.required&&r===void 0){an(e,r,n,a,i);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=e.type;o.indexOf(s)>-1?Sr[s](r)||a.push(oe(i.messages.types[s],e.fullField,e.type)):s&&qe(r)!==e.type&&a.push(oe(i.messages.types[s],e.fullField,e.type))},Vn=function(e,r,n,a,i){(/^\s+$/.test(r)||r==="")&&a.push(oe(i.messages.whitespace,e.fullField))};const P={required:an,whitespace:Vn,type:jn,range:kn,enum:$n,pattern:Ln};var Wn=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(z(r)&&!e.required)return n();P.required(e,r,a,o,i)}n(o)},_n=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(r==null&&!e.required)return n();P.required(e,r,a,o,i,"array"),r!=null&&(P.type(e,r,a,o,i),P.range(e,r,a,o,i))}n(o)},zn=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(z(r)&&!e.required)return n();P.required(e,r,a,o,i),r!==void 0&&P.type(e,r,a,o,i)}n(o)},Bn=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(z(r,"date")&&!e.required)return n();if(P.required(e,r,a,o,i),!z(r,"date")){var v;r instanceof Date?v=r:v=new Date(r),P.type(e,v,a,o,i),v&&P.range(e,v.getTime(),a,o,i)}}n(o)},In="enum",Un=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(z(r)&&!e.required)return n();P.required(e,r,a,o,i),r!==void 0&&P[In](e,r,a,o,i)}n(o)},Jn=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(z(r)&&!e.required)return n();P.required(e,r,a,o,i),r!==void 0&&(P.type(e,r,a,o,i),P.range(e,r,a,o,i))}n(o)},Qn=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(z(r)&&!e.required)return n();P.required(e,r,a,o,i),r!==void 0&&(P.type(e,r,a,o,i),P.range(e,r,a,o,i))}n(o)},Zn=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(z(r)&&!e.required)return n();P.required(e,r,a,o,i),r!==void 0&&P.type(e,r,a,o,i)}n(o)},Gn=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(r===""&&(r=void 0),z(r)&&!e.required)return n();P.required(e,r,a,o,i),r!==void 0&&(P.type(e,r,a,o,i),P.range(e,r,a,o,i))}n(o)},Kn=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(z(r)&&!e.required)return n();P.required(e,r,a,o,i),r!==void 0&&P.type(e,r,a,o,i)}n(o)},On=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(z(r,"string")&&!e.required)return n();P.required(e,r,a,o,i),z(r,"string")||P.pattern(e,r,a,o,i)}n(o)},Yn=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(z(r)&&!e.required)return n();P.required(e,r,a,o,i),z(r)||P.type(e,r,a,o,i)}n(o)},Xn=function(e,r,n,a,i){var o=[],s=Array.isArray(r)?"array":qe(r);P.required(e,r,a,o,i,s),n(o)},pn=function(e,r,n,a,i){var o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(z(r,"string")&&!e.required)return n();P.required(e,r,a,o,i,"string"),z(r,"string")||(P.type(e,r,a,o,i),P.range(e,r,a,o,i),P.pattern(e,r,a,o,i),e.whitespace===!0&&P.whitespace(e,r,a,o,i))}n(o)},Ct=function(e,r,n,a,i){var o=e.type,s=[],v=e.required||!e.required&&a.hasOwnProperty(e.field);if(v){if(z(r,o)&&!e.required)return n();P.required(e,r,a,s,i,o),z(r,o)||P.type(e,r,a,s,i)}n(s)};const Pr={string:pn,method:Zn,number:Gn,boolean:zn,regexp:Yn,integer:Qn,float:Jn,array:_n,object:Kn,enum:Un,pattern:On,date:Bn,url:Ct,hex:Ct,email:Ct,required:Xn,any:Wn};var Kr=function(){function t(e){Et(this,t),We(this,"rules",null),We(this,"_messages",xt),this.define(e)}return Dt(t,[{key:"define",value:function(r){var n=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(qe(r)!=="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(a){var i=r[a];n.rules[a]=Array.isArray(i)?i:[i]})}},{key:"messages",value:function(r){return r&&(this._messages=_t(Pt(),r)),this._messages}},{key:"validate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},o=r,s=a,v=i;if(typeof s=="function"&&(v=s,s={}),!this.rules||Object.keys(this.rules).length===0)return v&&v(null,o),Promise.resolve(o);function h(f){var S=[],c={};function q(M){if(Array.isArray(M)){var F;S=(F=S).concat.apply(F,Te(M))}else S.push(M)}for(var w=0;w<f.length;w++)q(f[w]);S.length?(c=qt(S),v(S,c)):v(null,o)}if(s.messages){var m=this.messages();m===xt&&(m=Pt()),_t(m,s.messages),s.messages=m}else s.messages=this.messages();var l={},C=s.keys||Object.keys(this.rules);C.forEach(function(f){var S=n.rules[f],c=o[f];S.forEach(function(q){var w=q;typeof w.transform=="function"&&(o===r&&(o=R({},o)),c=o[f]=w.transform(c),c!=null&&(w.type=w.type||(Array.isArray(c)?"array":qe(c)))),typeof w=="function"?w={validator:w}:w=R({},w),w.validator=n.getValidationMethod(w),w.validator&&(w.field=f,w.fullField=w.fullField||f,w.type=n.getType(w),l[f]=l[f]||[],l[f].push({rule:w,value:c,source:o,field:f}))})});var g={};return Nn(l,s,function(f,S){var c=f.rule,q=(c.type==="object"||c.type==="array")&&(qe(c.fields)==="object"||qe(c.defaultField)==="object");q=q&&(c.required||!c.required&&f.value),c.field=f.field;function w(L,B){return R(R({},B),{},{fullField:"".concat(c.fullField,".").concat(L),fullFields:c.fullFields?[].concat(Te(c.fullFields),[L]):[L]})}function M(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=Array.isArray(L)?L:[L];!s.suppressWarning&&B.length&&t.warning("async-validator:",B),B.length&&c.message!==void 0&&(B=[].concat(c.message));var j=B.map(Wt(c,o));if(s.first&&j.length)return g[c.field]=1,S(j);if(!q)S(j);else{if(c.required&&!f.value)return c.message!==void 0?j=[].concat(c.message).map(Wt(c,o)):s.error&&(j=[s.error(c,oe(s.messages.required,c.field))]),S(j);var I={};c.defaultField&&Object.keys(f.value).map(function(_){I[_]=c.defaultField}),I=R(R({},I),f.rule.fields);var Y={};Object.keys(I).forEach(function(_){var V=I[_],de=Array.isArray(V)?V:[V];Y[_]=de.map(w.bind(null,_))});var se=new t(Y);se.messages(s.messages),f.rule.options&&(f.rule.options.messages=s.messages,f.rule.options.error=s.error),se.validate(f.value,f.rule.options||s,function(_){var V=[];j&&j.length&&V.push.apply(V,Te(j)),_&&_.length&&V.push.apply(V,Te(_)),S(V.length?V:null)})}}var F;if(c.asyncValidator)F=c.asyncValidator(c,f.value,M,f.source,s);else if(c.validator){try{F=c.validator(c,f.value,M,f.source,s)}catch(L){var x,y;(x=(y=console).error)===null||x===void 0||x.call(y,L),s.suppressValidatorError||setTimeout(function(){throw L},0),M(L.message)}F===!0?M():F===!1?M(typeof c.message=="function"?c.message(c.fullField||c.field):c.message||"".concat(c.fullField||c.field," fails")):F instanceof Array?M(F):F instanceof Error&&M(F.message)}F&&F.then&&F.then(function(){return M()},function(L){return M(L)})},function(f){h(f)},o)}},{key:"getType",value:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Pr.hasOwnProperty(r.type))throw new Error(oe("Unknown rule type %s",r.type));return r.type||"string"}},{key:"getValidationMethod",value:function(r){if(typeof r.validator=="function")return r.validator;var n=Object.keys(r),a=n.indexOf("message");return a!==-1&&n.splice(a,1),n.length===1&&n[0]==="required"?Pr.required:Pr[this.getType(r)]||void 0}}]),t}();We(Kr,"register",function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");Pr[e]=r});We(Kr,"warning",Fn);We(Kr,"messages",xt);We(Kr,"validators",Pr);function ea(t){var e=t.prefixCls,r=t.align,n=t.arrow,a=t.arrowPos,i=n||{},o=i.className,s=i.content,v=a.x,h=v===void 0?0:v,m=a.y,l=m===void 0?0:m,C=u.useRef();if(!r||!r.points)return null;var g={position:"absolute"};if(r.autoArrow!==!1){var f=r.points[0],S=r.points[1],c=f[0],q=f[1],w=S[0],M=S[1];c===w||!["t","b"].includes(c)?g.top=l:c==="t"?g.top=0:g.bottom=0,q===M||!["l","r"].includes(q)?g.left=h:q==="l"?g.left=0:g.right=0}return u.createElement("div",{ref:C,className:cr("".concat(e,"-arrow"),o),style:g},s)}function ra(t){var e=t.prefixCls,r=t.open,n=t.zIndex,a=t.mask,i=t.motion;return a?u.createElement(rn,Mr({},i,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(o){var s=o.className;return u.createElement("div",{style:{zIndex:n},className:cr("".concat(e,"-mask"),s)})}):null}var ta=u.memo(function(t){var e=t.children;return e},function(t,e){return e.cache}),na=u.forwardRef(function(t,e){var r=t.popup,n=t.className,a=t.prefixCls,i=t.style,o=t.target,s=t.onVisibleChanged,v=t.open,h=t.keepDom,m=t.fresh,l=t.onClick,C=t.mask,g=t.arrow,f=t.arrowPos,S=t.align,c=t.motion,q=t.maskMotion,w=t.forceRender,M=t.getPopupContainer,F=t.autoDestroy,x=t.portal,y=t.zIndex,L=t.onMouseEnter,B=t.onMouseLeave,j=t.onPointerEnter,I=t.ready,Y=t.offsetX,se=t.offsetY,_=t.offsetR,V=t.offsetB,de=t.onAlign,X=t.onPrepare,ue=t.stretch,Q=t.targetWidth,Z=t.targetHeight,E=typeof r=="function"?r():r,_e=v||h,re=(M==null?void 0:M.length)>0,p=u.useState(!M||!re),D=$(p,2),ee=D[0],lr=D[1];if(O(function(){!ee&&re&&o&&lr(!0)},[ee,re,o]),!ee)return null;var we="auto",te={left:"-1000vw",top:"-1000vh",right:we,bottom:we};if(I||!v){var ze,Be=S.points,Ie=S.dynamicInset||((ze=S._experimental)===null||ze===void 0?void 0:ze.dynamicInset),he=Ie&&Be[0][1]==="r",Ce=Ie&&Be[0][0]==="b";he?(te.right=_,te.left=we):(te.left=Y,te.right=we),Ce?(te.bottom=V,te.top=we):(te.top=se,te.bottom=we)}var J={};return ue&&(ue.includes("height")&&Z?J.height=Z:ue.includes("minHeight")&&Z&&(J.minHeight=Z),ue.includes("width")&&Q?J.width=Q:ue.includes("minWidth")&&Q&&(J.minWidth=Q)),v||(J.pointerEvents="none"),u.createElement(x,{open:w||_e,getContainer:M&&function(){return M(o)},autoDestroy:F},u.createElement(ra,{prefixCls:a,open:v,zIndex:y,mask:C,motion:q}),u.createElement(en,{onResize:de,disabled:!v},function(Fe){return u.createElement(rn,Mr({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:w,leavedClassName:"".concat(a,"-hidden")},c,{onAppearPrepare:X,onEnterPrepare:X,visible:v,onVisibleChanged:function(Ee){var ne;c==null||(ne=c.onVisibleChanged)===null||ne===void 0||ne.call(c,Ee),s(Ee)}}),function(Ue,Ee){var ne=Ue.className,rr=Ue.style,Je=cr(a,ne,n);return u.createElement("div",{ref:un(Fe,e,Ee),className:Je,style:R(R(R(R({"--arrow-x":"".concat(f.x||0,"px"),"--arrow-y":"".concat(f.y||0,"px")},te),J),rr),{},{boxSizing:"border-box",zIndex:y},i),onMouseEnter:L,onMouseLeave:B,onPointerEnter:j,onClick:l},g&&u.createElement(ea,{prefixCls:a,arrow:g,arrowPos:f,align:S}),u.createElement(ta,{cache:!v&&!m},E))})}))}),aa=u.forwardRef(function(t,e){var r=t.children,n=t.getTriggerDOMNode,a=Gr(r),i=u.useCallback(function(s){fn(e,n?n(s):s)},[n]),o=Kt(i,r.ref);return a?u.cloneElement(r,{ref:o}):r}),Bt=u.createContext(null);function It(t){return t?Array.isArray(t)?t:[t]:[]}function ia(t,e,r,n){return u.useMemo(function(){var a=It(r??e),i=It(n??e),o=new Set(a),s=new Set(i);return t&&(o.has("hover")&&(o.delete("hover"),o.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[o,s]},[t,e,r,n])}function oa(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function sa(t,e,r,n){for(var a=r.points,i=Object.keys(t),o=0;o<i.length;o+=1){var s,v=i[o];if(oa((s=t[v])===null||s===void 0?void 0:s.points,a,n))return"".concat(e,"-placement-").concat(v)}return""}function Ut(t,e,r,n){return e||(r?{motionName:"".concat(t,"-").concat(r)}:n?{motionName:n}:null)}function qr(t){return t.ownerDocument.defaultView}function Ft(t){for(var e=[],r=t==null?void 0:t.parentElement,n=["hidden","scroll","clip","auto"];r;){var a=qr(r).getComputedStyle(r),i=a.overflowX,o=a.overflowY,s=a.overflow;[i,o,s].some(function(v){return n.includes(v)})&&e.push(r),r=r.parentElement}return e}function xr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?e:t}function Cr(t){return xr(parseFloat(t),0)}function Jt(t,e){var r=R({},t);return(e||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var a=qr(n).getComputedStyle(n),i=a.overflow,o=a.overflowClipMargin,s=a.borderTopWidth,v=a.borderBottomWidth,h=a.borderLeftWidth,m=a.borderRightWidth,l=n.getBoundingClientRect(),C=n.offsetHeight,g=n.clientHeight,f=n.offsetWidth,S=n.clientWidth,c=Cr(s),q=Cr(v),w=Cr(h),M=Cr(m),F=xr(Math.round(l.width/f*1e3)/1e3),x=xr(Math.round(l.height/C*1e3)/1e3),y=(f-S-w-M)*F,L=(C-g-c-q)*x,B=c*x,j=q*x,I=w*F,Y=M*F,se=0,_=0;if(i==="clip"){var V=Cr(o);se=V*F,_=V*x}var de=l.x+I-se,X=l.y+B-_,ue=de+l.width+2*se-I-Y-y,Q=X+l.height+2*_-B-j-L;r.left=Math.max(r.left,de),r.top=Math.max(r.top,X),r.right=Math.min(r.right,ue),r.bottom=Math.min(r.bottom,Q)}}),r}function Qt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(e),n=r.match(/^(.*)\%$/);return n?t*(parseFloat(n[1])/100):parseFloat(r)}function Zt(t,e){var r=e||[],n=$(r,2),a=n[0],i=n[1];return[Qt(t.width,a),Qt(t.height,i)]}function Gt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function fr(t,e){var r=e[0],n=e[1],a,i;return r==="t"?i=t.y:r==="b"?i=t.y+t.height:i=t.y+t.height/2,n==="l"?a=t.x:n==="r"?a=t.x+t.width:a=t.x+t.width/2,{x:a,y:i}}function je(t,e){var r={t:"b",b:"t",l:"r",r:"l"};return t.map(function(n,a){return a===e?r[n]||"c":n}).join("")}function ua(t,e,r,n,a,i,o){var s=u.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[n]||{}}),v=$(s,2),h=v[0],m=v[1],l=u.useRef(0),C=u.useMemo(function(){return e?Ft(e):[]},[e]),g=u.useRef({}),f=function(){g.current={}};t||f();var S=Ve(function(){if(e&&r&&t){let ve=function(wr,Ae){var er=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fr,Br=D.x+wr,Ir=D.y+Ae,gt=Br+Ce,yt=Ir+he,d=Math.max(Br,er.left),b=Math.max(Ir,er.top),k=Math.min(gt,er.right),W=Math.min(yt,er.bottom);return Math.max(0,(k-d)*(W-b))},sr=function(){Ke=D.y+T,Oe=Ke+he,Re=D.x+N,nr=Re+Ce};var w,M,F,x,y=e,L=y.ownerDocument,B=qr(y),j=B.getComputedStyle(y),I=j.width,Y=j.height,se=j.position,_=y.style.left,V=y.style.top,de=y.style.right,X=y.style.bottom,ue=y.style.overflow,Q=R(R({},a[n]),i),Z=L.createElement("div");(w=y.parentElement)===null||w===void 0||w.appendChild(Z),Z.style.left="".concat(y.offsetLeft,"px"),Z.style.top="".concat(y.offsetTop,"px"),Z.style.position=se,Z.style.height="".concat(y.offsetHeight,"px"),Z.style.width="".concat(y.offsetWidth,"px"),y.style.left="0",y.style.top="0",y.style.right="auto",y.style.bottom="auto",y.style.overflow="hidden";var E;if(Array.isArray(r))E={x:r[0],y:r[1],width:0,height:0};else{var _e,re,p=r.getBoundingClientRect();p.x=(_e=p.x)!==null&&_e!==void 0?_e:p.left,p.y=(re=p.y)!==null&&re!==void 0?re:p.top,E={x:p.x,y:p.y,width:p.width,height:p.height}}var D=y.getBoundingClientRect();D.x=(M=D.x)!==null&&M!==void 0?M:D.left,D.y=(F=D.y)!==null&&F!==void 0?F:D.top;var ee=L.documentElement,lr=ee.clientWidth,we=ee.clientHeight,te=ee.scrollWidth,ze=ee.scrollHeight,Be=ee.scrollTop,Ie=ee.scrollLeft,he=D.height,Ce=D.width,J=E.height,Fe=E.width,Ue={left:0,top:0,right:lr,bottom:we},Ee={left:-Ie,top:-Be,right:te-Ie,bottom:ze-Be},ne=Q.htmlRegion,rr="visible",Je="visibleFirst";ne!=="scroll"&&ne!==Je&&(ne=rr);var ae=ne===Je,Or=Jt(Ee,C),A=Jt(Ue,C),Fr=ne===rr?A:Or,Qe=ae?A:Fr;y.style.left="auto",y.style.top="auto",y.style.right="0",y.style.bottom="0";var G=y.getBoundingClientRect();y.style.left=_,y.style.top=V,y.style.right=de,y.style.bottom=X,y.style.overflow=ue,(x=y.parentElement)===null||x===void 0||x.removeChild(Z);var $e=xr(Math.round(Ce/parseFloat(I)*1e3)/1e3),De=xr(Math.round(he/parseFloat(Y)*1e3)/1e3);if($e===0||De===0||St(r)&&!cn(r))return;var Yr=Q.offset,Xr=Q.targetOffset,Er=Zt(D,Yr),me=$(Er,2),ge=me[0],fe=me[1],pr=Zt(E,Xr),Ze=$(pr,2),ce=Ze[0],Le=Ze[1];E.x-=ce,E.y-=Le;var et=Q.points||[],Dr=$(et,2),rt=Dr[0],tt=Dr[1],Se=Gt(tt),ie=Gt(rt),vr=fr(E,Se),K=fr(D,ie),ke=R({},Q),N=vr.x-K.x+ge,T=vr.y-K.y+fe,ye=ve(N,T),Ge=ve(N,T,A),dr=fr(E,["t","l"]),le=fr(D,["t","l"]),Rr=fr(E,["b","r"]),hr=fr(D,["b","r"]),He=Q.overflow||{},Nr=He.adjustX,nt=He.adjustY,mr=He.shiftX,tr=He.shiftY,gr=function(Ae){return typeof Ae=="boolean"?Ae:Ae>=0},Ke,Oe,Re,nr;sr();var Ye=gr(nt),Ar=ie[0]===Se[0];if(Ye&&ie[0]==="t"&&(Oe>Qe.bottom||g.current.bt)){var U=T;Ar?U-=he-J:U=dr.y-hr.y-fe;var Tr=ve(N,U),at=ve(N,U,A);Tr>ye||Tr===ye&&(!ae||at>=Ge)?(g.current.bt=!0,T=U,fe=-fe,ke.points=[je(ie,0),je(Se,0)]):g.current.bt=!1}if(Ye&&ie[0]==="b"&&(Ke<Qe.top||g.current.tb)){var Xe=T;Ar?Xe+=he-J:Xe=Rr.y-le.y-fe;var $r=ve(N,Xe),it=ve(N,Xe,A);$r>ye||$r===ye&&(!ae||it>=Ge)?(g.current.tb=!0,T=Xe,fe=-fe,ke.points=[je(ie,0),je(Se,0)]):g.current.tb=!1}var Lr=gr(Nr),kr=ie[1]===Se[1];if(Lr&&ie[1]==="l"&&(nr>Qe.right||g.current.rl)){var pe=N;kr?pe-=Ce-Fe:pe=dr.x-hr.x-ge;var Hr=ve(pe,T),ar=ve(pe,T,A);Hr>ye||Hr===ye&&(!ae||ar>=Ge)?(g.current.rl=!0,N=pe,ge=-ge,ke.points=[je(ie,1),je(Se,1)]):g.current.rl=!1}if(Lr&&ie[1]==="r"&&(Re<Qe.left||g.current.lr)){var Ne=N;kr?Ne+=Ce-Fe:Ne=Rr.x-le.x-ge;var jr=ve(Ne,T),Vr=ve(Ne,T,A);jr>ye||jr===ye&&(!ae||Vr>=Ge)?(g.current.lr=!0,N=Ne,ge=-ge,ke.points=[je(ie,1),je(Se,1)]):g.current.lr=!1}sr();var Me=mr===!0?0:mr;typeof Me=="number"&&(Re<A.left&&(N-=Re-A.left-ge,E.x+Fe<A.left+Me&&(N+=E.x-A.left+Fe-Me)),nr>A.right&&(N-=nr-A.right-ge,E.x>A.right-Me&&(N+=E.x-A.right+Me)));var be=tr===!0?0:tr;typeof be=="number"&&(Ke<A.top&&(T-=Ke-A.top-fe,E.y+J<A.top+be&&(T+=E.y-A.top+J-be)),Oe>A.bottom&&(T-=Oe-A.bottom-fe,E.y>A.bottom-be&&(T+=E.y-A.bottom+be)));var ir=D.x+N,or=ir+Ce,Pe=D.y+T,ot=Pe+he,Wr=E.x,st=Wr+Fe,yr=E.y,ut=yr+J,ft=Math.max(ir,Wr),ct=Math.min(or,st),_r=(ft+ct)/2,lt=_r-ir,vt=Math.max(Pe,yr),zr=Math.min(ot,ut),dt=(vt+zr)/2,ht=dt-Pe;o==null||o(e,ke);var br=G.right-D.x-(N+D.width),xe=G.bottom-D.y-(T+D.height);$e===1&&(N=Math.round(N),br=Math.round(br)),De===1&&(T=Math.round(T),xe=Math.round(xe));var mt={ready:!0,offsetX:N/$e,offsetY:T/De,offsetR:br/$e,offsetB:xe/De,arrowX:lt/$e,arrowY:ht/De,scaleX:$e,scaleY:De,align:ke};m(mt)}}),c=function(){l.current+=1;var M=l.current;Promise.resolve().then(function(){l.current===M&&S()})},q=function(){m(function(M){return R(R({},M),{},{ready:!1})})};return O(q,[n]),O(function(){t||q()},[t]),[h.ready,h.offsetX,h.offsetY,h.offsetR,h.offsetB,h.arrowX,h.arrowY,h.scaleX,h.scaleY,h.align,c]}function fa(t,e,r,n,a){O(function(){if(t&&e&&r){let l=function(){n(),a()};var i=e,o=r,s=Ft(i),v=Ft(o),h=qr(o),m=new Set([h].concat(Te(s),Te(v)));return m.forEach(function(C){C.addEventListener("scroll",l,{passive:!0})}),h.addEventListener("resize",l,{passive:!0}),n(),function(){m.forEach(function(C){C.removeEventListener("scroll",l),h.removeEventListener("resize",l)})}}},[t,e,r])}function ca(t,e,r,n,a,i,o,s){var v=u.useRef(t);v.current=t,u.useEffect(function(){if(e&&n&&(!a||i)){var h=function(g){var f;v.current&&!o(((f=g.composedPath)===null||f===void 0||(f=f.call(g))===null||f===void 0?void 0:f[0])||g.target)&&s(!1)},m=qr(n);m.addEventListener("mousedown",h,!0),m.addEventListener("contextmenu",h,!0);var l=Mt(r);return l&&(l.addEventListener("mousedown",h,!0),l.addEventListener("contextmenu",h,!0)),function(){m.removeEventListener("mousedown",h,!0),m.removeEventListener("contextmenu",h,!0),l&&(l.removeEventListener("mousedown",h,!0),l.removeEventListener("contextmenu",h,!0))}}},[e,r,n,a,i])}var la=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function va(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nn,e=u.forwardRef(function(r,n){var a=r.prefixCls,i=a===void 0?"rc-trigger-popup":a,o=r.children,s=r.action,v=s===void 0?"hover":s,h=r.showAction,m=r.hideAction,l=r.popupVisible,C=r.defaultPopupVisible,g=r.onPopupVisibleChange,f=r.afterPopupVisibleChange,S=r.mouseEnterDelay,c=r.mouseLeaveDelay,q=c===void 0?.1:c,w=r.focusDelay,M=r.blurDelay,F=r.mask,x=r.maskClosable,y=x===void 0?!0:x,L=r.getPopupContainer,B=r.forceRender,j=r.autoDestroy,I=r.destroyPopupOnHide,Y=r.popup,se=r.popupClassName,_=r.popupStyle,V=r.popupPlacement,de=r.builtinPlacements,X=de===void 0?{}:de,ue=r.popupAlign,Q=r.zIndex,Z=r.stretch,E=r.getPopupClassNameFromAlign,_e=r.fresh,re=r.alignPoint,p=r.onPopupClick,D=r.onPopupAlign,ee=r.arrow,lr=r.popupMotion,we=r.maskMotion,te=r.popupTransitionName,ze=r.popupAnimation,Be=r.maskTransitionName,Ie=r.maskAnimation,he=r.className,Ce=r.getTriggerDOMNode,J=Rt(r,la),Fe=j||I||!1,Ue=u.useState(!1),Ee=$(Ue,2),ne=Ee[0],rr=Ee[1];O(function(){rr(ln())},[]);var Je=u.useRef({}),ae=u.useContext(Bt),Or=u.useMemo(function(){return{registerSubPopup:function(b,k){Je.current[b]=k,ae==null||ae.registerSubPopup(b,k)}}},[ae]),A=vn(),Fr=u.useState(null),Qe=$(Fr,2),G=Qe[0],$e=Qe[1],De=u.useRef(null),Yr=Ve(function(d){De.current=d,St(d)&&G!==d&&$e(d),ae==null||ae.registerSubPopup(A,d)}),Xr=u.useState(null),Er=$(Xr,2),me=Er[0],ge=Er[1],fe=u.useRef(null),pr=Ve(function(d){St(d)&&me!==d&&(ge(d),fe.current=d)}),Ze=u.Children.only(o),ce=(Ze==null?void 0:Ze.props)||{},Le={},et=Ve(function(d){var b,k,W=me;return(W==null?void 0:W.contains(d))||((b=Mt(W))===null||b===void 0?void 0:b.host)===d||d===W||(G==null?void 0:G.contains(d))||((k=Mt(G))===null||k===void 0?void 0:k.host)===d||d===G||Object.values(Je.current).some(function(H){return(H==null?void 0:H.contains(d))||d===H})}),Dr=Ut(i,lr,ze,te),rt=Ut(i,we,Ie,Be),tt=u.useState(C||!1),Se=$(tt,2),ie=Se[0],vr=Se[1],K=l??ie,ke=Ve(function(d){l===void 0&&vr(d)});O(function(){vr(l||!1)},[l]);var N=u.useRef(K);N.current=K;var T=u.useRef([]);T.current=[];var ye=Ve(function(d){var b;ke(d),((b=T.current[T.current.length-1])!==null&&b!==void 0?b:K)!==d&&(T.current.push(d),g==null||g(d))}),Ge=u.useRef(),dr=function(){clearTimeout(Ge.current)},le=function(b){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;dr(),k===0?ye(b):Ge.current=setTimeout(function(){ye(b)},k*1e3)};u.useEffect(function(){return dr},[]);var Rr=u.useState(!1),hr=$(Rr,2),He=hr[0],Nr=hr[1];O(function(d){(!d||K)&&Nr(!0)},[K]);var nt=u.useState(null),mr=$(nt,2),tr=mr[0],gr=mr[1],Ke=u.useState(null),Oe=$(Ke,2),Re=Oe[0],nr=Oe[1],Ye=function(b){nr([b.clientX,b.clientY])},Ar=ua(K,G,re&&Re!==null?Re:me,V,X,ue,D),U=$(Ar,11),Tr=U[0],at=U[1],Xe=U[2],$r=U[3],it=U[4],Lr=U[5],kr=U[6],pe=U[7],Hr=U[8],ar=U[9],Ne=U[10],jr=ia(ne,v,h,m),Vr=$(jr,2),Me=Vr[0],be=Vr[1],ir=Me.has("click"),or=be.has("click")||be.has("contextMenu"),Pe=Ve(function(){He||Ne()}),ot=function(){N.current&&re&&or&&le(!1)};fa(K,me,G,Pe,ot),O(function(){Pe()},[Re,V]),O(function(){K&&!(X!=null&&X[V])&&Pe()},[JSON.stringify(ue)]);var Wr=u.useMemo(function(){var d=sa(X,i,ar,re);return cr(d,E==null?void 0:E(ar))},[ar,E,X,i,re]);u.useImperativeHandle(n,function(){return{nativeElement:fe.current,popupElement:De.current,forceAlign:Pe}});var st=u.useState(0),yr=$(st,2),ut=yr[0],ft=yr[1],ct=u.useState(0),_r=$(ct,2),lt=_r[0],vt=_r[1],zr=function(){if(Z&&me){var b=me.getBoundingClientRect();ft(b.width),vt(b.height)}},dt=function(){zr(),Pe()},ht=function(b){Nr(!1),Ne(),f==null||f(b)},br=function(){return new Promise(function(b){zr(),gr(function(){return b})})};O(function(){tr&&(Ne(),tr(),gr(null))},[tr]);function xe(d,b,k,W){Le[d]=function(H){var Ur;W==null||W(H),le(b,k);for(var bt=arguments.length,Nt=new Array(bt>1?bt-1:0),Jr=1;Jr<bt;Jr++)Nt[Jr-1]=arguments[Jr];(Ur=ce[d])===null||Ur===void 0||Ur.call.apply(Ur,[ce,H].concat(Nt))}}(ir||or)&&(Le.onClick=function(d){var b;N.current&&or?le(!1):!N.current&&ir&&(Ye(d),le(!0));for(var k=arguments.length,W=new Array(k>1?k-1:0),H=1;H<k;H++)W[H-1]=arguments[H];(b=ce.onClick)===null||b===void 0||b.call.apply(b,[ce,d].concat(W))}),ca(K,or,me,G,F,y,et,le);var mt=Me.has("hover"),ve=be.has("hover"),sr,wr;mt&&(xe("onMouseEnter",!0,S,function(d){Ye(d)}),xe("onPointerEnter",!0,S,function(d){Ye(d)}),sr=function(b){(K||He)&&G!==null&&G!==void 0&&G.contains(b.target)&&le(!0,S)},re&&(Le.onMouseMove=function(d){var b;(b=ce.onMouseMove)===null||b===void 0||b.call(ce,d)})),ve&&(xe("onMouseLeave",!1,q),xe("onPointerLeave",!1,q),wr=function(){le(!1,q)}),Me.has("focus")&&xe("onFocus",!0,w),be.has("focus")&&xe("onBlur",!1,M),Me.has("contextMenu")&&(Le.onContextMenu=function(d){var b;N.current&&be.has("contextMenu")?le(!1):(Ye(d),le(!0)),d.preventDefault();for(var k=arguments.length,W=new Array(k>1?k-1:0),H=1;H<k;H++)W[H-1]=arguments[H];(b=ce.onContextMenu)===null||b===void 0||b.call.apply(b,[ce,d].concat(W))}),he&&(Le.className=cr(ce.className,he));var Ae=R(R({},ce),Le),er={},Br=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Br.forEach(function(d){J[d]&&(er[d]=function(){for(var b,k=arguments.length,W=new Array(k),H=0;H<k;H++)W[H]=arguments[H];(b=Ae[d])===null||b===void 0||b.call.apply(b,[Ae].concat(W)),J[d].apply(J,W)})});var Ir=u.cloneElement(Ze,R(R({},Ae),er)),gt={x:Lr,y:kr},yt=ee?R({},ee!==!0?ee:{}):null;return u.createElement(u.Fragment,null,u.createElement(en,{disabled:!K,ref:pr,onResize:dt},u.createElement(aa,{getTriggerDOMNode:Ce},Ir)),u.createElement(Bt.Provider,{value:Or},u.createElement(na,{portal:t,ref:Yr,prefixCls:i,popup:Y,className:cr(se,Wr),style:_,target:me,onMouseEnter:sr,onMouseLeave:wr,onPointerEnter:sr,zIndex:Q,open:K,keepDom:He,fresh:_e,onClick:p,mask:F,motion:Dr,maskMotion:rt,onVisibleChanged:ht,onPrepare:br,forceRender:B,autoDestroy:Fe,getPopupContainer:L,align:ar,arrow:yt,arrowPos:gt,ready:Tr,offsetX:at,offsetY:Xe,offsetR:$r,offsetB:it,onAlign:Pe,stretch:Z,targetWidth:ut/pe,targetHeight:lt/Hr})))});return e}const Sa=va(nn);function Ma(t){var e=u.createContext(void 0),r=function(a){var i=a.value,o=a.children,s=u.useRef(i);s.current=i;var v=u.useState(function(){return{getValue:function(){return s.current},listeners:new Set}}),h=$(v,1),m=h[0];return O(function(){pt.unstable_batchedUpdates(function(){m.listeners.forEach(function(l){l(i)})})},[i]),u.createElement(e.Provider,{value:m},o)};return{Context:e,Provider:r,defaultValue:t}}function Pa(t,e){var r=Ve(typeof e=="function"?e:function(l){if(e===void 0)return l;if(!Array.isArray(e))return l[e];var C={};return e.forEach(function(g){C[g]=l[g]}),C}),n=u.useContext(t==null?void 0:t.Context),a=n||{},i=a.listeners,o=a.getValue,s=u.useRef();s.current=r(n?o():t==null?void 0:t.defaultValue);var v=u.useState({}),h=$(v,2),m=h[1];return O(function(){if(!n)return;function l(C){var g=r(C);dn(s.current,g,!0)||m({})}return i.add(l),function(){i.delete(l)}},[n]),s.current}function xa(){var t=u.createContext(null);function e(){return u.useContext(t)}function r(a,i){var o=Gr(a),s=function(h,m){var l=o?{ref:m}:{},C=u.useRef(0),g=u.useRef(h),f=e();return f!==null?u.createElement(a,Mr({},h,l)):((!i||i(g.current,h))&&(C.current+=1),g.current=h,u.createElement(t.Provider,{value:C.current},u.createElement(a,Mr({},h,l))))};return o?u.forwardRef(s):s}function n(a,i){var o=Gr(a),s=function(h,m){var l=o?{ref:m}:{};return e(),u.createElement(a,Mr({},h,l))};return o?u.memo(u.forwardRef(s),i):u.memo(s,i)}return{makeImmutable:r,responseImmutable:n,useImmutableMark:e}}export{$t as C,nn as P,Kr as S,Sa as T,Ma as a,xa as c,Pa as u};
