import{a as e,r as s}from"./react-CXTTs95W.js";import{c as Ce}from"./react-dom-yuB3ijGn.js";import{L as Pe,B as Ae}from"./react-router-dom-QTqdjtlu.js";import{t as Re,v as De,s as J,X as $e,n as Me,Y as Ue,Z as Le}from"./@ant-design-Cu48EoO5.js";import{I as L,F as y,B as R,s as f,S as V,M as B,U as Fe,a as le,b as z,c as K,D as Ee,d as X,T as oe,e as me,f as de,g as H,L as T,A as ue,R as Ne,C as je,h as ve}from"./antd-277TGPdo.js";import"./firebase-8-TpDqay.js";import{g as _,i as Q,a as pe,b as he,c as ee,s as Oe,d as E,e as Se,f as Te,h as be,p as Y,o as F,j as Ve,u as N,k as Ye,l as ze,m as qe,n as Be}from"./@firebase-DLwkTP4P.js";import{a as Ie,d as Ke,e as q}from"./react-router-twpDXtcF.js";import{h as ie}from"./moment-C5S46NFB.js";import"./classnames-BK5ccKcQ.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-Br25Cn4W.js";import"./rc-util-B4_nxVmj.js";import"./@babel-nFbzLRrx.js";import"./@emotion-CW87jbl0.js";import"./stylis-OW4gUFyn.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@ctrl-DOFZgDuz.js";import"./rc-resize-observer-SNp0dgvm.js";import"./rc-motion-D0wS6mJl.js";import"./@rc-component-B8DITbGo.js";import"./rc-tooltip-DuIlsXpM.js";import"./rc-overflow-DIq6Ohyx.js";import"./rc-picker-BJrhm_Iz.js";import"./dayjs-Cjk_ngT2.js";import"./rc-tabs-DZA7Vwap.js";import"./rc-dropdown-BJn02ThS.js";import"./rc-menu-CquJva2Z.js";import"./rc-select-BX7JXiJ0.js";import"./rc-virtual-list-93CXUUyq.js";import"./rc-drawer-CzZ41GhK.js";import"./rc-field-form-t5Akuz2d.js";import"./scroll-into-view-if-needed-BZeNfFF0.js";import"./compute-scroll-into-view-DWa9QgjM.js";import"./rc-dialog-BZR8Okv-.js";import"./rc-notification-k0GmURqV.js";import"./rc-steps-CAIJ0OEC.js";import"./rc-table-6BtdogKg.js";import"./rc-tree-CX7osicu.js";import"./rc-checkbox-DRDFhoc1.js";import"./rc-pagination-B2RA6YWg.js";import"./throttle-debounce-CUWDS_la.js";import"./rc-input-BxMBkRGF.js";import"./rc-textarea-YKp_Mmse.js";import"./rc-upload-xRbTi4QQ.js";import"./rc-progress-Cnp6xwQf.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function d(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(l){if(l.ep)return;l.ep=!0;const n=d(l);fetch(l.href,n)}})();const He="/%3CCathering-system%3E/assets/images-BCzU2XUH.png",_e="/%3CCathering-system%3E/assets/cattering-DY9YoaYj.png",Ge=p=>p?e.createElement("span",{id:"visible-eye"},e.createElement(Re,null)):e.createElement("span",{id:"hidden-eye"},e.createElement(De,null)),Ze=p=>{const{...m}=p??{};return e.createElement(L.Password,{onPaste:d=>d.preventDefault(),onCopy:d=>d.preventDefault(),iconRender:Ge,...m})},We={apiKey:"AIzaSyBkLYGrfE-Vk2s1sTJ76b2-dnVaSwKkcZs",authDomain:"catering-management-a6ecd.firebaseapp.com",projectId:"catering-management-a6ecd",storageBucket:"catering-management-a6ecd.appspot.com",messagingSenderId:"35759549611",appId:"1:35759549611:web:d73c18a3bef68d49bb5bee"};let G;_().length?G=pe():G=Q(We);const Je=he(G),Xe=ee(G),Qe=()=>{const[p]=y.useForm(),m=Ie(),d=async n=>{const{email:a,password:i}=n;try{const g=(await Oe(Je,a,i)).user,b=E(Xe,`users/${g.uid}/userType`),w=await Se(b);if(w.exists()){const P=w.val();P==="Admin"?m("/admin-dashboard"):P==="Service Seeker"?m("/service-seeker-dashboard"):P==="Service Provider"?m("/service-provider-dashboard"):f.error({message:"Unknown user type, unable to navigate!"}),f.success({message:"Successfully signed in!"})}else f.error({message:"User type not found!"})}catch(u){f.error({message:u.message}),console.error("Error signing in:",u.message)}},c=(n,a)=>a?et(a)?Promise.resolve():Promise.reject("Please enter a valid email ID"):Promise.reject("Please enter email ID"),l=()=>e.createElement("div",{style:{textAlign:"center",fontSize:"1.5rem",color:"#4096ff",margin:"20px 0"}},e.createElement(R,{type:"link",size:"large",onClick:()=>m("sign-up")},"Sign Up?"));return e.createElement(e.Fragment,null,e.createElement("h2",{className:"text-slate-700 login-title text-center mt-4 font-medium",style:{display:"flex",justifyContent:"center"}},"Sign In"),e.createElement(y,{form:p,layout:"vertical",onFinish:d,name:"user",size:"large"},e.createElement(y.Item,{validateTrigger:["onSubmit"],rules:[{required:!0,type:"email",validator:c}],name:"email"},e.createElement(L,{autoFocus:!0,placeholder:"Email"})),e.createElement(y.Item,{rules:[{required:!0,message:"Please enter your password"}],name:"password"},e.createElement(Ze,{placeholder:"Password"})),e.createElement(R,{id:"login-sign-in",htmlType:"submit",type:"primary",block:!0,className:"mt-3"},"Sign in")),e.createElement(l,null))},et=p=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p),tt=()=>e.createElement("div",{id:"login",className:"login"},e.createElement("div",{className:"left-wrapper"},e.createElement(xe,null),e.createElement("h3",{className:"text-slate-700",style:{fontSize:"50px"}},"Catering Management System"),e.createElement("img",{src:He,alt:"book-keep-img",className:"login-image"})),e.createElement("div",{className:"right-wrapper"},e.createElement("div",null,e.createElement(Qe,null)))),xe=()=>e.createElement(Pe,{to:"/",onClick:p=>p.preventDefault()},e.createElement("img",{src:_e,alt:"Instagram Logo",style:{marginLeft:"-10px",width:"200px",height:"200px"},className:"login-branding"})),st="/%3CCathering-system%3E/assets/imaged-removebg-preview-CXHU7idb.png",{Option:ne}=V,at={apiKey:"AIzaSyBkLYGrfE-Vk2s1sTJ76b2-dnVaSwKkcZs",authDomain:"catering-management-a6ecd.firebaseapp.com",projectId:"catering-management-a6ecd",storageBucket:"catering-management-a6ecd.appspot.com",messagingSenderId:"35759549611",appId:"1:35759549611:web:d73c18a3bef68d49bb5bee"};let Z;_().length?Z=pe():Z=Q(at);const rt=he(Z),nt=ee(Z),lt=()=>{const[p,m]=s.useState(!1),d=Ie(),c=async n=>{const{email:a,password:i,name:u,phoneNumber:g,userType:b}=n;try{m(!0);const P=(await Te(rt,a,i)).user;await be(E(nt,"users/"+P.uid),{username:u,email:a,phoneNumber:g,userType:b}),f.success({message:"Sign-up successful! User data saved."}),d("/")}catch(w){console.error("Error signing up:",w),f.error({message:w.message||"Error signing up. Please try again."})}finally{m(!1)}},l=()=>e.createElement("div",{style:{textAlign:"center",fontSize:"1.5rem",color:"#4096ff",margin:"20px 0"}},e.createElement(R,{type:"link",size:"large",onClick:()=>d("/")},"Sign In?"));return e.createElement("div",{style:{maxWidth:"400px",margin:"0 auto",padding:"20px"}},e.createElement("h2",null,"Sign Up"),e.createElement(y,{layout:"vertical",onFinish:c},e.createElement(y.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter your name!"}]},e.createElement(L,{placeholder:"Name"})),e.createElement(y.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please enter your email!"},{type:"email",message:"Please enter a valid email!"}]},e.createElement(L,{placeholder:"Email"})),e.createElement(y.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please enter your password!"}]},e.createElement(L.Password,{placeholder:"Password"})),e.createElement(y.Item,{label:"Phone Number",name:"phoneNumber",rules:[{required:!0,message:"Please enter your phone number!"}]},e.createElement(L,{placeholder:"Phone Number"})),e.createElement(y.Item,{label:"User Type",name:"userType",rules:[{required:!0,message:"Please select a user type!"}]},e.createElement(V,{placeholder:"Select user type"},e.createElement(ne,{value:"Admin"},"Admin"),e.createElement(ne,{value:"Service Seeker"},"Service Seeker"),e.createElement(ne,{value:"Service Provider"},"Service Provider"))),e.createElement(y.Item,null,e.createElement(R,{type:"primary",htmlType:"submit",loading:p,block:!0},"Sign Up"))),e.createElement(l,null))},it=()=>e.createElement("div",{id:"login",className:"login"},e.createElement("div",{className:"left-wrapper"},e.createElement(xe,null),e.createElement("h3",{className:"text-slate-700",style:{fontSize:"50px"}},"Cathering service"),e.createElement("img",{src:st,alt:"book-keep-img",className:"login-image"})),e.createElement("div",{className:"right-wrapper"},e.createElement("div",null,e.createElement(lt,null)))),ct={apiKey:"AIzaSyDMlTrY4ZHvAVVXCbbFUruaTJWb4Moi_E4",authDomain:"insta-realtime-db.firebaseapp.com",projectId:"insta-realtime-db",storageBucket:"insta-realtime-db.appspot.com",messagingSenderId:"858579017981",appId:"1:858579017981:web:0c6071cd3c64c6171bde94"};let ce;_().length?ce=_()[0]:ce=Q(ct);const ke=ee(ce),ot=({open:p,close:m,onUpload:d})=>{const[c,l]=s.useState(null),[n,a]=s.useState(!1),i=async()=>{if(c){a(!0);const g=new FileReader;g.onloadend=async()=>{try{const b=g.result.split(",")[1],w=E(ke,"images");await Y(w,b),d(b),le.success("Image uploaded successfully!"),m()}catch(b){console.error("Error uploading image:",b),le.error("Failed to upload image")}finally{a(!1)}},g.readAsDataURL(c)}},u={beforeUpload:g=>(l(g),!1)};return e.createElement(B,{title:"Upload Post",open:p,onCancel:m,centered:!0},e.createElement(Fe,{...u,listType:"picture-card"},e.createElement("div",null,e.createElement(J,null),e.createElement("div",{style:{marginTop:8}},"Upload"))),e.createElement(R,{type:"primary",onClick:i,loading:n,style:{marginTop:"1rem"}},"Submit"))},mt=({setVisible:p})=>{const[m,d]=s.useState("home"),c=l=>{if(d(l.key),l.key==="reels")return p(!0)};return e.createElement("div",{style:{position:"fixed",bottom:0,width:"100%",backgroundColor:"#fff",borderTop:"1px solid #dcdcdc",height:"70px"}},e.createElement(z,{onClick:c,selectedKeys:[m],mode:"horizontal",theme:"light",style:{display:"flex",justifyContent:"space-around",height:"100%"}},e.createElement(z.Item,{key:"home",style:{width:"20%",display:"flex",justifyContent:"center",alignItems:"center"}},e.createElement($e,{style:{fontSize:"28px"}})),e.createElement(z.Item,{key:"search",style:{width:"20%",display:"flex",justifyContent:"center",alignItems:"center"}},e.createElement(Me,{style:{fontSize:"28px"}})),e.createElement(z.Item,{key:"reels",style:{width:"20%",display:"flex",justifyContent:"center",alignItems:"center"}},e.createElement(J,{style:{fontSize:"28px"}})),e.createElement(z.Item,{key:"shop",style:{width:"20%",display:"flex",justifyContent:"center",alignItems:"center"}},e.createElement(Ue,{style:{fontSize:"28px"}})),e.createElement(z.Item,{key:"profile",style:{width:"20%",display:"flex",justifyContent:"center",alignItems:"center"}},e.createElement(Le,{style:{fontSize:"28px"}}))))},dt=({images:p})=>{const m=c=>{},d=(c,l)=>{};return e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2rem"}},p.map(c=>e.createElement("div",{key:c.id,style:{border:"1px solid #dbdbdb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",padding:"16px",width:"380px",backgroundColor:"#fafafa",marginBottom:"3rem"}},e.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"}},e.createElement("div",{style:{fontWeight:"bold",fontSize:"14px"}},c.username)),e.createElement("img",{src:c.url,style:{width:"100%",height:"400px",objectFit:"cover",borderRadius:"8px",marginBottom:"1rem"},alt:"Uploaded"}),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1rem"}},e.createElement("button",{onClick:()=>m(c.id),style:{backgroundColor:"#389710",color:"white",padding:"8px 16px",borderRadius:"999px",fontSize:"14px",border:"none",cursor:"pointer"}},"Like (",c.likes,")"),e.createElement("button",{onClick:()=>d(c.id),style:{backgroundColor:"#8e8e8e",color:"white",padding:"8px 16px",borderRadius:"999px",fontSize:"14px",border:"none",cursor:"pointer"}},"Comment")))))},ut=()=>{const[p,m]=s.useState(!1),[d,c]=s.useState([]);s.useEffect(()=>{const n=E(ke,"images");F(n,a=>{const i=a.val();if(console.log(n,i),i){const u=Object.keys(i).map(g=>({id:g,url:`data:image/jpeg;base64,${i[g]}`}));c(u)}})},[]);const l=n=>{c(a=>[...a,{id:a.length+1,url:`data:image/jpeg;base64,${n}`}])};return e.createElement("div",null,e.createElement(dt,{images:d}),e.createElement(mt,{setVisible:m}),p&&e.createElement(ot,{open:p,close:()=>m(!1),onUpload:l}))},pt={apiKey:"AIzaSyCwmhaV-lcwJH80l2gZfZyDETuFLQlFuBw",authDomain:"catering-management-syst-2450c.firebaseapp.com",databaseURL:"https://catering-management-syst-2450c-default-rtdb.firebaseio.com",projectId:"catering-management-syst-2450c",storageBucket:"catering-management-syst-2450c.appspot.com",messagingSenderId:"52785450117",appId:"1:52785450117:web:918057b05c194022916dec"};let W;_().some(p=>p.name==="SecondaryApp")?W=pe("SecondaryApp"):W=Q(pt,"SecondaryApp");const x=ee(W),gt=Ve(W),{Option:ft}=V,yt=()=>{const[p,m]=s.useState([]),[d,c]=s.useState([]),[l,n]=s.useState([]),[a,i]=s.useState(!0),[u,g]=s.useState(!1),[b,w]=s.useState(!1),[P]=y.useForm(),[A,D]=s.useState(null),[t,v]=s.useState([]),[C,$]=s.useState(0);console.log(d),s.useEffect(()=>{const r=E(x,"/service");F(r,o=>{const h=o.val(),S=h?Object.keys(h).map(k=>({id:k,...h[k],userCount:h[k].users?h[k].users.length:0})):[];m(S),i(!1)})},[]),s.useEffect(()=>{const r=E(x,"/menu");F(r,o=>{const h=o.val(),S=h?Object.keys(h).map(k=>({id:k,name:h[k].name,price:parseFloat(h[k].price)})):[];n(S)})},[]);const M=r=>{const h=l.filter(S=>r.includes(S.id)).reduce((S,k)=>S+k.price,0);$(h)},j=async r=>{const o=E(x,`/service/${b?A:""}`),h=l.filter(U=>r.menuList.includes(U.id)),S=h.reduce((U,O)=>U+O.price,0),k={name:r.name,description:r.description,users:r.users||[],serviceDate:r.serviceDate.format("YYYY-MM-DD"),status:"Not Accepted",menuList:h,totalAmount:S,isPaid:!1};try{if(b){const U=t.filter(O=>!k.users.includes(O));for(let O of U){const we=E(x,`/users/${O}`);await N(we,{isInService:!1})}await N(o,k),f.success({message:"Service updated successfully!"})}else await Y(E(x,"/service"),k),f.success({message:"Service added successfully!"});for(let U of k.users){const O=E(x,`/users/${U}`);await N(O,{isInService:!0})}P.resetFields(),g(!1),w(!1),$(0),D(null),v([])}catch{f.error({message:"Error saving service!"})}},te=r=>{D(r.id),P.setFieldsValue({name:r.name,description:r.description,users:r.users,serviceDate:ie(r.serviceDate),menuList:r.menuList.map(o=>o.id)}),v(r.users||[]),w(!0),g(!0)},se=()=>{P.resetFields(),w(!1),D(null),g(!0)},ae=async r=>{const o=E(x,`/service/${r}`);try{F(o,async h=>{const S=h.val();if(S&&S.users)for(let k of S.users){const U=E(x,`/users/${k}`);await N(U,{isInService:!1})}}),await N(o,{status:"Canceled"}),f.success({message:"Service canceled successfully!"})}catch{f.error({message:"Error canceling service!"})}},re=[{title:"Service Name",dataIndex:"name",key:"name",align:"center"},{title:"Description",dataIndex:"description",key:"description",align:"center"},{title:"User Count",dataIndex:"userCount",key:"userCount",align:"center"},{title:"Total Amount",dataIndex:"totalAmount",key:"totalAmount",align:"center",render:r=>`$${r?r.toFixed(2):"0.00"}`},{title:"Status",dataIndex:"status",key:"status",align:"center"},{title:"Action",key:"action",align:"center",render:(r,o)=>e.createElement(e.Fragment,null,e.createElement(R,{type:"link",onClick:()=>te(o),disabled:o.status==="Canceled"},"Edit"),e.createElement(R,{type:"link",danger:!0,onClick:()=>ae(o.id),disabled:o.status==="Canceled"},"Cancel"))}];s.useEffect(()=>{I()},[]);const I=()=>{i(!0);const r=E(x,"users");F(r,o=>{const h=o.val();if(h){const S=Object.keys(h).map(k=>({id:k,...h[k]}));console.log(S),c(S.map(k=>({label:k.name,value:k.id})))}else c([]);i(!1)},o=>{message.error("Failed to load users: "+o.message),i(!1)})};return e.createElement("div",null,e.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.createElement("div",null,e.createElement("h2",null,"Service Page")),e.createElement(R,{type:"primary",icon:e.createElement(J,null),onClick:se},"Add Service")),e.createElement(K,{columns:re,dataSource:p,rowKey:"id",loading:a,style:{marginTop:"20px"}}),e.createElement(B,{title:b?"Edit Service":"Add New Service",visible:u,onCancel:()=>{g(!1),$(0),P.resetFields()},footer:null,centered:!0},e.createElement(y,{form:P,layout:"vertical",onFinish:j},e.createElement(y.Item,{label:"Service Name",name:"name",rules:[{required:!0,message:"Please enter the service name"}]},e.createElement(L,{placeholder:"Service Name"})),e.createElement(y.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please enter the description"}]},e.createElement(L.TextArea,{placeholder:"Description"})),e.createElement(y.Item,{label:"Service Date",name:"serviceDate",rules:[{required:!0,message:"Please select the service date"}]},e.createElement(Ee,{placeholder:"Select date",style:{width:"100%"}})),e.createElement(y.Item,{label:"Assign Users",name:"users",rules:[{required:!0,message:"Please select users"}]},e.createElement(V,{mode:"multiple",placeholder:"Select users",options:d.filter(r=>!r.isInService)})),e.createElement(y.Item,{label:"Select Menu Items",name:"menuList",rules:[{required:!0,message:"Please select menu items"}]},e.createElement(V,{mode:"multiple",placeholder:"Select menu items",onChange:M},l.map(r=>e.createElement(ft,{key:r.id,value:r.id},r.name," - $",r.price.toFixed(2))))),e.createElement(y.Item,{label:"Total Amount"},e.createElement(L,{value:`$${C.toFixed(2)}`,readOnly:!0})),e.createElement(y.Item,null,e.createElement(R,{type:"primary",htmlType:"submit",block:!0},b?"Update Service":"Add Service")))))},Et=()=>{const[p,m]=s.useState([]),[d,c]=s.useState(!1),[l,n]=s.useState(!1),[a,i]=s.useState(null),[u]=y.useForm(),g=()=>{c(!0);const t=E(x,"users");F(t,v=>{const C=v.val();if(C){const $=Object.keys(C).map(M=>({id:M,...C[M]}));m($)}else m([]);c(!1)},v=>{le.error("Failed to load users: "+v.message),c(!1)})},b=async t=>{try{if(a){const v=E(x,`users/${a.id}`);await N(v,t),f.success({message:"User updated successfully!"})}else{const v=E(x,"users"),C=Y(v);await be(C,{...t,isInService:!1}),f.success({message:"User added successfully!"})}g(),n(!1),i(null)}catch{f.error({message:`Failed to ${a?"update":"add"} user`})}},w=async t=>{try{const v=E(x,`users/${t}`);await Ye(v),f.success({message:"User deleted successfully!"}),g()}catch{f.error({message:"Failed to delete user"})}},P=()=>{u.resetFields(),i(null),n(!0)},A=t=>{u.setFieldsValue(t),i(t),n(!0)};s.useEffect(()=>{g()},[]);const D=[{title:"Name",dataIndex:"name",key:"name",align:"center"},{title:"Email",dataIndex:"email",key:"email",align:"center"},{title:"Action",dataIndex:"action",key:"action",align:"center",render:(t,v)=>e.createElement(e.Fragment,null,e.createElement(R,{type:"link",onClick:()=>A(v)},"Edit"),e.createElement(R,{type:"link",danger:!0,disabled:v.isInService,onClick:()=>w(v.id)},"Delete"))}];return e.createElement("div",null,e.createElement("div",{style:{display:"flex",justifyContent:"end"}},e.createElement(R,{type:"primary",onClick:P,icon:e.createElement(J,null),style:{marginBottom:16}},"Add User")),e.createElement(K,{dataSource:p,columns:D,rowKey:"id",loading:d}),l&&e.createElement(B,{title:a?"Edit User":"Add User",open:l,onCancel:()=>n(!1),onOk:()=>u.submit(),centered:!0},e.createElement(y,{form:u,layout:"vertical",initialValues:{},onFinish:b},e.createElement(y.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter the name"}]},e.createElement(L,{placeholder:"Enter user name"})),e.createElement(y.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter the email"}]},e.createElement(L,{placeholder:"Enter user email"})))))},vt=()=>{const[p,m]=s.useState([]),[d,c]=s.useState(!0);s.useEffect(()=>{(async()=>{try{const a=E(x,"/service");F(a,i=>{const u=i.val(),g=u?Object.keys(u).map(b=>({id:b,...u[b]})):[];m(g),c(!1)})}catch(a){f.error({message:`Error loading services: ${a.message}`}),c(!1)}})()},[]);const l=[{title:"Service Name",dataIndex:"name",key:"name",align:"left"},{title:"Description",dataIndex:"description",key:"description",align:"center"},{title:"Amount",dataIndex:"totalAmount",key:"totalAmount",align:"center",render:n=>`$${n?n.toFixed(2):"0.00"}`},{title:"Status",dataIndex:"isPaid",key:"isPaid",align:"center",render:n=>e.createElement(oe,{color:n?"green":"red"},n?"Completed":"Not Yet")}];return e.createElement("div",null,e.createElement("h2",null,"Payments"),e.createElement(X,{spinning:d},e.createElement(K,{columns:l,dataSource:p,rowKey:"id",pagination:!1})))},{Step:ge}=H,ht=()=>{const[p,m]=s.useState(!1),[d,c]=s.useState(0),[l,n]=s.useState([]),[a,i]=s.useState(""),[u,g]=s.useState(!0),b=()=>{m(!0)},w=()=>{m(!1)},P=async()=>{if(!a.trim()){f.error({message:"Message cannot be empty"});return}const t=d===0?"serviceSeeker":"serviceProvider",v=E(x,"/message");try{await Y(v,{content:a,timestamp:new Date().toISOString(),sender:"admin",recipient:t}),i(""),f.success({message:"Message sent!"})}catch(C){f.error({message:`Error sending message: ${C.message}`})}};s.useEffect(()=>{const t=E(x,"/message");F(t,v=>{const C=v.val(),$=[];C&&Object.keys(C).forEach(M=>{$.push({id:M,...C[M]})}),n($.sort((M,j)=>new Date(M.timestamp)-new Date(j.timestamp))),g(!1)})},[]);const A=l.filter(t=>t.sender==="admin"&&t.recipient===(d===0?"serviceSeeker":"serviceProvider")||t.sender===(d===0?"serviceSeeker":"serviceProvider")&&t.recipient==="admin"),D=[{key:"1",label:"Service",children:e.createElement(yt,null)},{key:"2",label:"Users",children:e.createElement(Et,null)},{key:"3",label:"Payments",children:e.createElement(vt,null)}];return e.createElement("div",null,e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("h2",null,"Admin DashBoard"),e.createElement(R,{type:"primary",onClick:b},"Message")),e.createElement(me,{items:D,className:"gal-tab",style:{height:"100vh"}}),e.createElement(de,{title:"Chat",placement:"right",onClose:w,visible:p,width:"40%"},e.createElement(H,{current:d,onChange:c},e.createElement(ge,{title:"Service Seeker"}),e.createElement(ge,{title:"Service Provider"})),e.createElement("div",{style:{margin:"20px 0",maxHeight:"300px",overflowY:"auto"}},e.createElement(T,{dataSource:A,loading:u,renderItem:t=>e.createElement(T.Item,{key:t.id,style:{justifyContent:t.sender==="admin"?"flex-end":"flex-start"}},e.createElement(T.Item.Meta,{avatar:e.createElement(ue,null,t.sender==="admin"?"A":"S"),description:t.content,style:{textAlign:t.sender==="admin"?"right":"left",backgroundColor:t.sender==="admin"?"#e6f7ff":"#fffbe6",padding:"10px",borderRadius:"10px"}}))})),e.createElement(y,{layout:"inline",onFinish:P,style:{position:"absolute",bottom:10,width:"97%",marginRight:"10px"}},e.createElement(y.Item,{style:{flexGrow:1}},e.createElement(L,{placeholder:"Type a message",value:a,onChange:t=>i(t.target.value)})),e.createElement(y.Item,null,e.createElement(R,{type:"primary",htmlType:"submit"},"Send")))))},St=()=>{const[p,m]=s.useState([]),[d,c]=s.useState(!0);s.useEffect(()=>{(async()=>{try{const i=E(x,"/service");F(i,u=>{const g=u.val(),b=g?Object.keys(g).map(w=>({id:w,...g[w]})):[];m(b),c(!1)})}catch(i){f.error({message:`Error loading services: ${i.message}`}),c(!1)}})()},[]);const l=a=>{B.confirm({title:"Confirm Payment",content:`Are you sure you want to confirm the payment for ${a.name}?`,okText:"Confirm",cancelText:"Cancel",centered:!0,onOk:async()=>{try{const i=E(x,`/service/${a.id}`);await N(i,{isPaid:!0}),f.success({message:"Payment completed successfully!"})}catch(i){f.error({message:`Error completing payment: ${i.message}`})}}})},n=[{title:"Service Name",dataIndex:"name",key:"name",align:"center"},{title:"Description",dataIndex:"description",key:"description",align:"center"},{title:"Amount",dataIndex:"totalAmount",key:"totalAmount",align:"center",render:a=>`$${a?a.toFixed(2):"0.00"}`},{title:"Status",dataIndex:"isPaid",key:"isPaid",align:"center",render:a=>e.createElement(oe,{color:a?"green":"red"},a?"Completed":"Not Yet")},{title:"Action",key:"action",align:"center",render:(a,i)=>e.createElement(R,{type:"primary",disabled:!!i.isPaid,onClick:()=>l(i)},"Pay")}];return e.createElement("div",{style:{padding:"20px"}},e.createElement("h2",null,"Payments"),e.createElement(X,{spinning:d},e.createElement(K,{columns:n,dataSource:p,rowKey:"id",pagination:!1})))},{Meta:bt}=ve,It=()=>{const[p,m]=s.useState([]),[d,c]=s.useState([]),[l,n]=s.useState(!0);return s.useEffect(()=>{const a=async()=>{try{const u=ze(gt),g=await qe(u),b=await Promise.all(g.items.map(w=>Be(w)));m(b)}catch(u){f.error({message:`Error loading menu images: ${u.message}`}),n(!1)}},i=async()=>{try{const u=E(x,"/menu"),g=await Se(u);g.exists()?c(Object.values(g.val())):f.error({message:"No menu details found!"}),n(!1)}catch(u){f.error({message:`Error loading menu details: ${u.message}`}),n(!1)}};a(),i()},[]),e.createElement(X,{spinning:l},e.createElement("div",{style:{padding:"20px"}},e.createElement("h2",null,"Catering Menu"),e.createElement(Ne,{gutter:[16,16]},d.map((a,i)=>e.createElement(je,{xs:24,sm:12,md:8,lg:6,key:i},e.createElement(ve,{hoverable:!0,cover:p[i]?e.createElement("img",{alt:a.name,src:p[i],style:{height:"200px",objectFit:"cover"}}):e.createElement("div",{style:{height:"200px",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"}},"No Image Available")},e.createElement(bt,{title:a.name,description:`Price: $${a.price}`}),e.createElement("p",null,a.description)))))))},{Step:fe}=H,xt=()=>{const[p,m]=s.useState(!1),[d,c]=s.useState(0),[l,n]=s.useState([]),[a,i]=s.useState(""),[u,g]=s.useState(!0),b=()=>{m(!0)},w=()=>{m(!1)},P=async()=>{if(!a.trim()){f.error({message:"Message cannot be empty"});return}const t=d===0?"serviceSeeker":"admin",v=E(x,"/message");try{await Y(v,{content:a,timestamp:new Date().toISOString(),sender:"serviceProvider",recipient:t}),i(""),f.success({message:"Message sent!"})}catch(C){f.error({message:`Error sending message: ${C.message}`})}};s.useEffect(()=>{const t=E(x,"/message");F(t,v=>{const C=v.val(),$=[];C&&Object.keys(C).forEach(M=>{$.push({id:M,...C[M]})}),n($.sort((M,j)=>new Date(M.timestamp)-new Date(j.timestamp))),g(!1)})},[]);const A=l.filter(t=>t.recipient===(d===0?"serviceSeeker":"admin")&&t.sender==="serviceProvider"||t.sender===(d===0?"serviceSeeker":"admin")&&t.recipient==="serviceProvider"),D=[{key:"1",label:"Menu",children:e.createElement(It,null)},{key:"2",label:"Payments",children:e.createElement(St,null)}];return e.createElement("div",null,e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("h2",null,"Service Provider Dashboard"),e.createElement(R,{type:"primary",onClick:b},"Message")),e.createElement(me,{items:D,className:"gal-tab",style:{height:"100vh"}}),e.createElement(de,{title:"Chat",placement:"right",onClose:w,visible:p,width:"40%"},e.createElement(H,{current:d,onChange:c},e.createElement(fe,{title:"Service Seeker"}),e.createElement(fe,{title:"Admin"})),e.createElement("div",{style:{margin:"20px 0",maxHeight:"300px",overflowY:"auto"}},e.createElement(T,{dataSource:A,loading:u,renderItem:t=>e.createElement(T.Item,{key:t.id,style:{justifyContent:t.sender==="serviceProvider"?"flex-end":"flex-start"}},e.createElement(T.Item.Meta,{avatar:e.createElement(ue,null,t.sender==="serviceProvider"?"P":t.sender==="admin"?"A":"S"),description:t.content,style:{textAlign:t.sender==="serviceProvider"?"right":"left",backgroundColor:t.sender==="serviceProvider"?"#e6f7ff":"#fffbe6",padding:"10px",borderRadius:"10px"}}))})),e.createElement(y,{layout:"inline",onFinish:P,style:{position:"absolute",bottom:10,width:"97%",marginRight:"10px"}},e.createElement(y.Item,{style:{flexGrow:1}},e.createElement(L,{placeholder:"Type a message",value:a,onChange:t=>i(t.target.value)})),e.createElement(y.Item,null,e.createElement(R,{type:"primary",htmlType:"submit"},"Send")))))},kt=()=>{const[p,m]=s.useState([]),[d,c]=s.useState(!0),[l,n]=s.useState(!1),[a,i]=s.useState(null),[u,g]=s.useState("");s.useEffect(()=>{(async()=>{try{const D=E(x,"/service");F(D,t=>{const v=t.val(),C=v?Object.keys(v).map($=>({id:$,...v[$]})):[];m(C),c(!1)})}catch(D){f.error({message:`Error loading services: ${D.message}`}),c(!1)}})()},[]);const b=A=>{i(A),n(!0)},w=async()=>{if(!u||isNaN(u)||u<0||u>100){f.error({message:"Please enter a valid discount percentage between 0 and 100"});return}const A=a.totalAmount*(1-u/100),D=E(x,`/service/${a.id}`);try{await N(D,{totalAmount:A}),f.success({message:"Discount applied successfully!"}),n(!1),g("")}catch(t){f.error({message:`Error applying discount: ${t.message}`})}},P=[{title:"Service Name",dataIndex:"name",key:"name",align:"left"},{title:"Description",dataIndex:"description",key:"description",align:"center"},{title:"Amount",dataIndex:"totalAmount",key:"totalAmount",align:"center",render:A=>`$${A?A.toFixed(2):"0.00"}`},{title:"Status",dataIndex:"isPaid",key:"isPaid",align:"center",render:A=>e.createElement(oe,{color:A?"green":"red"},A?"Completed":"Not Yet")},{title:"Action",key:"action",align:"center",render:(A,D)=>e.createElement(R,{type:"link",onClick:()=>b(D)},"Apply Discount")}];return e.createElement("div",null,e.createElement("h2",null,"Payments"),e.createElement(X,{spinning:d},e.createElement(K,{columns:P,dataSource:p,rowKey:"id",pagination:!1})),e.createElement(B,{title:"Apply Discount",visible:l,onCancel:()=>n(!1),onOk:w,okText:"Apply",centered:!0},e.createElement(L,{type:"number",placeholder:"Enter discount percentage",value:u,onChange:A=>g(A.target.value)})))},{Option:wt}=V,Ct=()=>{const[p,m]=s.useState([]),[d,c]=s.useState([]),[l,n]=s.useState([]),[a,i]=s.useState(!0),[u,g]=s.useState(!1),[b,w]=s.useState(!1),[P]=y.useForm(),[A,D]=s.useState(null),[t,v]=s.useState([]),[C,$]=s.useState(0);s.useEffect(()=>{const I=E(x,"/service");F(I,r=>{const o=r.val(),h=o?Object.keys(o).map(S=>({id:S,...o[S],userCount:o[S].users?o[S].users.length:0})):[];m(h),i(!1)})},[]),s.useEffect(()=>{const I=E(x,"/Users");F(I,r=>{const o=r.val(),h=o?Object.keys(o).map(S=>({label:o[S].name,value:S,isInService:o[S].isInService||!1})):[];c(h)})},[]),s.useEffect(()=>{const I=E(x,"/menu");F(I,r=>{const o=r.val(),h=o?Object.keys(o).map(S=>({id:S,name:o[S].name,price:parseFloat(o[S].price)})):[];n(h)})},[]);const M=I=>{const o=l.filter(h=>I.includes(h.id)).reduce((h,S)=>h+S.price,0);$(o)},j=I=>{const r=ie().startOf("day"),o=ie(I).startOf("day");return I?o.isAfter(r)?"Not Started":o.isSame(r)?"In Progress":o.isBefore(r)?"Completed":"Unknown":"Unknown"},te=async I=>{const r=E(x,`/service/${b?A:""}`),o=l.filter(k=>I.menuList.includes(k.id)),h=o.reduce((k,U)=>k+U.price,0),S={name:I.name,description:I.description,users:I.users||[],serviceDate:I.serviceDate.format("YYYY-MM-DD"),status:j(I.serviceDate.format("YYYY-MM-DD")),menuList:o,totalAmount:h,isPaid:!1};try{if(b){const k=t.filter(U=>!S.users.includes(U));for(let U of k){const O=E(x,`/users/${U}`);await N(O,{isInService:!1})}await N(r,S),f.success({message:"Service updated successfully!"})}else await Y(E(x,"/service"),S),f.success({message:"Service added successfully!"});for(let k of S.users){const U=E(x,`/users/${k}`);await N(U,{isInService:!0})}P.resetFields(),g(!1),w(!1),$(0),D(null),v([])}catch{f.error({message:"Error saving service!"})}},se=async(I,r)=>{const o=E(x,`/service/${I}`);try{await N(o,{status:r}),f.success({message:`Service status updated to ${r}!`})}catch(h){f.error({message:`Error updating status: ${h.message}`})}},ae=async I=>{const r=E(x,`/service/${I}`);try{await N(r,{status:"Canceled"}),f.success({message:"Service canceled successfully!"})}catch(o){f.error({message:`Error canceling service: ${o.message}`})}},re=[{title:"Service Name",dataIndex:"name",key:"name",align:"center"},{title:"Description",dataIndex:"description",key:"description",align:"center"},{title:"User Count",dataIndex:"userCount",key:"userCount",align:"center"},{title:"Total Amount",dataIndex:"totalAmount",key:"totalAmount",align:"center",render:I=>`$${I?I.toFixed(2):"0.00"}`},{title:"Status",dataIndex:"status",key:"status",align:"center"},{title:"Action",key:"action",align:"center",render:(I,r)=>e.createElement(e.Fragment,null,e.createElement(R,{type:"link",danger:!0,onClick:()=>ae(r.id),disabled:r.status==="Canceled"||r.status==="Not Started"},"Cancel"),e.createElement(R,{type:"link",onClick:()=>se(r.id,"Not Started"),disabled:r.status==="Canceled"||r.status==="Not Started"},"Accept"))}];return e.createElement("div",null,e.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.createElement("div",null,e.createElement("h2",null,"Service Page"))),e.createElement(K,{columns:re,dataSource:p,rowKey:"id",loading:a,style:{marginTop:"20px"}}),e.createElement(B,{title:b?"Edit Service":"Add New Service",visible:u,onCancel:()=>{g(!1),$(0),P.resetFields()},footer:null,centered:!0},e.createElement(y,{form:P,layout:"vertical",onFinish:te},e.createElement(y.Item,{label:"Service Name",name:"name",rules:[{required:!0,message:"Please enter the service name"}]},e.createElement(L,{placeholder:"Service Name"})),e.createElement(y.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please enter the description"}]},e.createElement(L.TextArea,{placeholder:"Description"})),e.createElement(y.Item,{label:"Service Date",name:"serviceDate",rules:[{required:!0,message:"Please select the service date"}]},e.createElement(Ee,{placeholder:"Select date",style:{width:"100%"}})),e.createElement(y.Item,{label:"Assign Users",name:"users",rules:[{required:!0,message:"Please select users"}]},e.createElement(V,{mode:"multiple",placeholder:"Select users",options:d.filter(I=>!I.isInService)})),e.createElement(y.Item,{label:"Select Menu Items",name:"menuList",rules:[{required:!0,message:"Please select menu items"}]},e.createElement(V,{mode:"multiple",placeholder:"Select menu items",onChange:M},l.map(I=>e.createElement(wt,{key:I.id,value:I.id},I.name," - $",I.price.toFixed(2))))),e.createElement(y.Item,{label:"Total Amount"},e.createElement(L,{value:`$${C.toFixed(2)}`,readOnly:!0})),e.createElement(y.Item,null,e.createElement(R,{type:"primary",htmlType:"submit",block:!0},b?"Update Service":"Add Service")))))},{Step:ye}=H,Pt=()=>{const[p,m]=s.useState(!1),[d,c]=s.useState(0),[l,n]=s.useState([]),[a,i]=s.useState(""),[u,g]=s.useState(!0),b=()=>{m(!0)},w=()=>{m(!1)},P=async()=>{if(!a.trim()){f.error({message:"Message cannot be empty"});return}const t=d===0?"admin":"serviceProvider",v=E(x,"/message");try{await Y(v,{content:a,timestamp:new Date().toISOString(),sender:"serviceSeeker",recipient:t}),i(""),f.success({message:"Message sent!"})}catch(C){f.error({message:`Error sending message: ${C.message}`})}};s.useEffect(()=>{const t=E(x,"/message");F(t,v=>{const C=v.val(),$=[];C&&Object.keys(C).forEach(M=>{$.push({id:M,...C[M]})}),n($.sort((M,j)=>new Date(M.timestamp)-new Date(j.timestamp))),g(!1)})},[]);const A=l.filter(t=>t.recipient===(d===0?"admin":"serviceProvider")&&t.sender==="serviceSeeker"||t.sender===(d===0?"admin":"serviceProvider")&&t.recipient==="serviceSeeker"),D=[{key:"1",label:"Menu",children:e.createElement(Ct,null)},{key:"2",label:"Payments",children:e.createElement(kt,null)}];return e.createElement("div",null,e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("h2",null,"Service Seeker Dashboard"),e.createElement(R,{type:"primary",onClick:b},"Message")),e.createElement(me,{items:D,className:"gal-tab",style:{height:"100vh"}}),e.createElement(de,{title:"Chat",placement:"right",onClose:w,visible:p,width:"40%"},e.createElement(H,{current:d,onChange:c},e.createElement(ye,{title:"Admin"}),e.createElement(ye,{title:"Service Provider"})),e.createElement("div",{style:{margin:"20px 0",maxHeight:"300px",overflowY:"auto"}},e.createElement(T,{dataSource:A,loading:u,renderItem:t=>e.createElement(T.Item,{key:t.id,style:{justifyContent:t.sender==="serviceSeeker"?"flex-end":"flex-start"}},e.createElement(T.Item.Meta,{avatar:e.createElement(ue,null,t.sender==="serviceSeeker"?"S":t.sender==="admin"?"A":"P"),description:t.content,style:{textAlign:t.sender==="serviceSeeker"?"right":"left",backgroundColor:t.sender==="serviceSeeker"?"#e6f7ff":"#fffbe6",padding:"10px",borderRadius:"10px"}}))})),e.createElement(y,{layout:"inline",onFinish:P,style:{position:"absolute",bottom:10,width:"97%",marginRight:"10px"}},e.createElement(y.Item,{style:{flexGrow:1}},e.createElement(L,{placeholder:"Type a message",value:a,onChange:t=>i(t.target.value)})),e.createElement(y.Item,null,e.createElement(R,{type:"primary",htmlType:"submit"},"Send")))))};function At(){return React.createElement(Ae,null,React.createElement(Ke,null,React.createElement(q,{path:"/",element:React.createElement(tt,null)}),React.createElement(q,{path:"/sign-up",element:React.createElement(it,null)}),React.createElement(q,{path:"/post",element:React.createElement(ut,null)}),React.createElement(q,{path:"/admin-dashboard",element:React.createElement(ht,null)}),React.createElement(q,{path:"/service-seeker-dashboard",element:React.createElement(xt,null)}),React.createElement(q,{path:"/service-provider-dashboard",element:React.createElement(Pt,null)})))}Ce(document.getElementById("root")).render(React.createElement(s.StrictMode,null,React.createElement(At,null)));
